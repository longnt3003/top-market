@model IEnumerable<TopMarket.Models.EntityFramework.Product>

@if (Model != null && Model.Any()) {
    foreach (var item in Model) {
        var img = item.ProductImages.FirstOrDefault(x => x.IsDefault);
        var strImage = img?.Image ?? string.Empty;

        <div class="product-item @item.ProductCategory.Alias">
            <div class="product discount product_filter">
                <div class="product_image">
                    <img src="@strImage" alt="@item.Title" />
                </div>

                <div data-id="@item.Id" class="favorite favorite_left"></div>

                @if (item.PromotionPrice > 0) {
                    <div class="product_bubble product_bubble_right product_bubble_red d-flex flex-column align-items-center">
                        <span>Sale</span>
                    </div>
                }

                <div class="product_info">
                    <h6 class="product_name">
                        <a href="/product-detail/@item.Alias-p@(item.Id)">@item.Title</a>
                    </h6>

                    @if (item.PromotionPrice > 0) {
                        <div class="product_price">
                            @TopMarket.Common.Common.FormatNumber(item.PromotionPrice, 0)
                            <span>@TopMarket.Common.Common.FormatNumber(item.Price, 0)</span>
                        </div>
                    } else {
                        <div class="product_price">@TopMarket.Common.Common.FormatNumber(item.Price, 0)</div>
                    }
                </div>
            </div>

            <div class="red_button add_to_cart_button">
                <a href="#" class="btnAddToCart" data-id="@item.Id">Add to Cart</a>
            </div>
        </div>
    }
}
